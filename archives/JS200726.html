<!-- build time:Wed Jul 29 2020 14:15:55 GMT+0800 (GMT+08:00) --><!DOCTYPE HTML><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="UTF-8"><meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1,minimum-scale=1"><meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"><meta http-equiv="Cache-Control" content="no-siteapp"><meta http-equiv="Cache-Control" content="no-transform"><meta name="renderer" content="webkit|ie-comp|ie-stand"><meta name="apple-mobile-web-app-capable" content="Onions说前端 - 从未如此简单有趣"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=no,email=no,adress=no"><meta name="browsermode" content="application"><meta name="screen-orientation" content="portrait"><link rel="dns-prefetch" href="http://algate.github.io"><meta name="keywords" content="小程序"><meta name="description" content="​每周的工作状态黄·历 - almanac综合运势：★ ★ ★ ★ ★爱情运势：★ ★ ★ ★ ★财富运势：★ ★ ★ ★ ★事业学业：★ ★ ★ ★ ★准备事项开发工具：uni-app，一套代..."><meta name="robots" content="all"><meta name="google" content="all"><meta name="googlebot" content="all"><meta name="verify" content="all"><title>前端知识-小程序使用canvas画七巧板 | Onions说前端 - 从未如此简单有趣</title><link rel="alternate" href="/atom.xml" title="Onions说前端 - 从未如此简单有趣" type="application/atom+xml"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/css/bootstrap.min.css?rev=3.3.7"><link rel="stylesheet" href="/css/font-awesome.min.css?rev=4.5.0"><link rel="stylesheet" href="/css/style.css?rev=@@hash"><div><script type="text/javascript">var cnzz_protocol="https:"==document.location.protocol?"https://":"http://";document.write(unescape("%3Cspan id='cnzz_stat_icon_1276282118'%3E%3C/span%3E%3Cscript src='"+cnzz_protocol+"s96.cnzz.com/z_stat.php%3Fid%3D1276282118%26online%3D1%26show%3Dline' type='text/javascript'%3E%3C/script%3E"))</script></div><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?617bf75bfd954382202927d87bf48f13";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script></head></html><!--[if lte IE 8]>
<style>
    html{ font-size: 1em }
</style>
<![endif]--><!--[if lte IE 9]>
<div style="ie">你使用的浏览器版本过低，为了你更好的阅读体验，请更新浏览器的版本或者使用其他现代浏览器，比如Chrome、Firefox、Safari等。</div>
<![endif]--><body><header class="main-header"><div class="main-header-box"><div class="canvas-box"><canvas id="canvas"></canvas></div><a class="header-avatar" href="/" title="onions"><img src="/img/avatar.jpg" alt="logo头像" class="img-responsive center-block"></a><div class="branding"><h2>不要跟我谈理想，我的理想是不工作</h2></div></div></header><nav class="main-navigation"><div class="container"><div class="row"><div class="col-sm-12"><div class="navbar-header"><span class="nav-toggle-button collapsed pull-right" data-toggle="collapse" data-target="#main-menu" id="mnav"><span class="sr-only"></span> <i class="fa fa-bars"></i> </span><a class="navbar-brand" href="http://algate.github.io">Onions说前端 - 从未如此简单有趣</a></div><div class="collapse navbar-collapse" id="main-menu"><ul class="menu"><li role="presentation" class="text-center"><a href="/"><i class="fa fa-home"></i>首页</a></li><li role="presentation" class="text-center"><a href="/categories/前端/"><i class="fa fa-chrome"></i>前端</a></li><li role="presentation" class="text-center"><a href="/categories/工具/"><i class="fa fa-wrench"></i>工具</a></li><li role="presentation" class="text-center"><a href="/archives/"><i class="fa fa-clock-o"></i>时间轴</a></li><li role="presentation" class="text-center"><a href="/categories/计算机/"><i class="fa fa-google-wallet"></i>计算机</a></li><li role="presentation" class="text-center"><a href="/categories/日记/"><i class="fa fa-book"></i>日记</a></li><li role="presentation" class="text-center"><a href="/404.html"><i class="fa fa-bug"></i>404</a></li></ul></div></div></div></div></nav><section class="content-wrap"><div class="container"><div class="row"><main class="col-md-8 main-content m-post"><p id="process"></p><article class="post"><div class="post-head"><h1 id="前端知识-小程序使用canvas画七巧板">前端知识-小程序使用canvas画七巧板</h1><div class="post-meta"><span class="categories-meta fa-wrap"><i class="fa fa-folder-open-o"></i> <a class="category-link" href="/categories/前端/">前端</a> </span><span class="fa-wrap"><i class="fa fa-tags"></i> <span class="tags-meta"><a class="tag-link" href="/tags/小程序/">小程序</a> </span></span><span class="fa-wrap"><i class="fa fa-clock-o"></i> <span class="date-meta">2020/07/26</span></span></div></div><div class="post-body post-content"><p>​</p><center>每周的工作状态<br><br><img src="/images/tangram/work.gif" alt="image"><br><br>黄·历 - almanac<br><br>综合运势：★ ★ ★ ★ ★<br>爱情运势：★ ★ ★ ★ ★<br>财富运势：★ ★ ★ ★ ★<br>事业学业：★ ★ ★ ★ ★<br><br></center><h3 id="准备事项"><a href="#准备事项" class="headerlink" title="准备事项"></a>准备事项</h3><p>开发工具：uni-app，一套代码编到10个平台；</p><p>开发环境：HBuilder，Vue，Node；</p><p>部署环境：微信小程序；</p><p>如下图所示：</p><p><img src="/images/tangram/tangram.png" alt="image"></p><h3 id="画七巧板的点位值："><a href="#画七巧板的点位值：" class="headerlink" title="画七巧板的点位值："></a>画七巧板的点位值：</h3><p>按照七巧板的图，把七巧板的每个色块按照｛x,y｝的对象方式存储在一个数组里。有七个色块，数组就有七个值：每个数组按照比例存储四块的每个点的位置信息；每个色块再加个颜色值，这个颜色随自己喜好添加。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">tangram: [</span><br><span class="line">    &#123; <span class="attr">p</span>: [&#123; <span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="number">0</span> &#125;, &#123; <span class="attr">x</span>: <span class="number">800</span>, <span class="attr">y</span>: <span class="number">0</span> &#125;, &#123; <span class="attr">x</span>: <span class="number">400</span>, <span class="attr">y</span>: <span class="number">400</span> &#125;], <span class="attr">color</span>: <span class="string">'#caff67'</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">p</span>: [&#123; <span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="number">0</span> &#125;, &#123; <span class="attr">x</span>: <span class="number">400</span>, <span class="attr">y</span>: <span class="number">400</span> &#125;, &#123; <span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="number">800</span> &#125;], <span class="attr">color</span>: <span class="string">'#67bccf'</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">p</span>: [&#123; <span class="attr">x</span>: <span class="number">800</span>, <span class="attr">y</span>: <span class="number">0</span> &#125;, &#123; <span class="attr">x</span>: <span class="number">800</span>, <span class="attr">y</span>: <span class="number">400</span> &#125;, &#123; <span class="attr">x</span>: <span class="number">600</span>, <span class="attr">y</span>: <span class="number">600</span> &#125;, &#123; <span class="attr">x</span>: <span class="number">600</span>, <span class="attr">y</span>: <span class="number">200</span> &#125;], <span class="attr">color</span>: <span class="string">'#cf3d61'</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">p</span>: [&#123; <span class="attr">x</span>: <span class="number">600</span>, <span class="attr">y</span>: <span class="number">200</span> &#125;, &#123; <span class="attr">x</span>: <span class="number">600</span>, <span class="attr">y</span>: <span class="number">600</span> &#125;, &#123; <span class="attr">x</span>: <span class="number">400</span>, <span class="attr">y</span>: <span class="number">400</span> &#125;], <span class="attr">color</span>: <span class="string">'#f9f51a'</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">p</span>: [&#123; <span class="attr">x</span>: <span class="number">400</span>, <span class="attr">y</span>: <span class="number">400</span> &#125;, &#123; <span class="attr">x</span>: <span class="number">600</span>, <span class="attr">y</span>: <span class="number">600</span> &#125;, &#123; <span class="attr">x</span>: <span class="number">400</span>, <span class="attr">y</span>: <span class="number">800</span> &#125;, &#123; <span class="attr">x</span>: <span class="number">200</span>, <span class="attr">y</span>: <span class="number">600</span> &#125;], <span class="attr">color</span>: <span class="string">'#a594c0'</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">p</span>: [&#123; <span class="attr">x</span>: <span class="number">200</span>, <span class="attr">y</span>: <span class="number">600</span> &#125;, &#123; <span class="attr">x</span>: <span class="number">400</span>, <span class="attr">y</span>: <span class="number">800</span> &#125;, &#123; <span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="number">800</span> &#125;], <span class="attr">color</span>: <span class="string">'#fa8ccc'</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">p</span>: [&#123; <span class="attr">x</span>: <span class="number">800</span>, <span class="attr">y</span>: <span class="number">400</span> &#125;, &#123; <span class="attr">x</span>: <span class="number">800</span>, <span class="attr">y</span>: <span class="number">800</span> &#125;, &#123; <span class="attr">x</span>: <span class="number">400</span>, <span class="attr">y</span>: <span class="number">800</span> &#125;], <span class="attr">color</span>: <span class="string">'#f6ca29'</span> &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h3 id="画七巧板"><a href="#画七巧板" class="headerlink" title="画七巧板"></a>画七巧板</h3><p>正常浏览器页面写canvas：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> canvas=<span class="built_in">document</span>.getElementById(<span class="string">"canvas"</span>);</span><br><span class="line"><span class="keyword">var</span> context=canvas.getContext(<span class="string">"2d"</span>);</span><br></pre></td></tr></table></figure><p>基于uni-app实现小程序，这样是获取不到的。☺</p><h3 id="html添加canvas元素："><a href="#html添加canvas元素：" class="headerlink" title="html添加canvas元素："></a>html添加canvas元素：</h3><p>HTML页面写canvas：<br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;view&gt;&lt;canvas style="width: 100vw;height: 100vw;" type="2d" canvas-id="tangram" id="tangram"&gt;&lt;/canvas&gt;&lt;/view&gt;</span><br><span class="line">&lt;<span class="regexp">/template&gt;</span></span><br></pre></td></tr></table></figure><p></p><h4 id="1-上述vue的html代码编译为h5："><a href="#1-上述vue的html代码编译为h5：" class="headerlink" title="1.上述vue的html代码编译为h5："></a>1.上述vue的html代码编译为h5：</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;uni-canvas data-v<span class="number">-2</span>fdafd79=<span class="string">""</span> canvas-id=<span class="string">"tangram"</span> type=<span class="string">"2d"</span> id=<span class="string">"tangram"</span> style=<span class="string">"width: 100vw; height: 100vw;"</span>&gt;</span><br><span class="line">    &lt;canvas width=<span class="string">"393"</span> height=<span class="string">"393"</span> style=<span class="string">"height: 393px; width: 393px;"</span>&gt;&lt;/canvas&gt;</span><br><span class="line">    &lt;div style=<span class="string">"position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; overflow: hidden;"</span>&gt;&lt;/div&gt;</span><br><span class="line">&lt;<span class="regexp">/uni-canvas&gt;</span></span><br></pre></td></tr></table></figure><h4 id="2-编译为小程序为："><a href="#2-编译为小程序为：" class="headerlink" title="2.编译为小程序为："></a>2.编译为小程序为：</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;canvas canvas-id=<span class="string">"tangram"</span> id=<span class="string">"tangram"</span> style=<span class="string">"width: 100vw;height: 100vw;"</span> type=<span class="string">"2d"</span>&gt;&lt;/canvas&gt;</span><br></pre></td></tr></table></figure><h3 id="获取canvas元素："><a href="#获取canvas元素：" class="headerlink" title="获取canvas元素："></a>获取canvas元素：</h3><h4 id="H5获取canvas元素："><a href="#H5获取canvas元素：" class="headerlink" title="H5获取canvas元素："></a>H5获取canvas元素：</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.canvas = <span class="built_in">document</span>.querySelector(<span class="string">'#tangram canvas'</span>);</span><br><span class="line"><span class="keyword">this</span>.ctx = <span class="keyword">this</span>.canvas.getContext(<span class="string">'2d'</span>);</span><br></pre></td></tr></table></figure><h4 id="小程序获取canvas元素："><a href="#小程序获取canvas元素：" class="headerlink" title="小程序获取canvas元素："></a>小程序获取canvas元素：</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> query = uni.createSelectorQuery();</span><br><span class="line">query</span><br><span class="line">    .select(<span class="string">'#tangram'</span>)</span><br><span class="line">    .fields(&#123; <span class="attr">node</span>: <span class="literal">true</span>, <span class="attr">size</span>: <span class="literal">true</span> &#125;)</span><br><span class="line">    .exec(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">         <span class="keyword">this</span>.canvas = res[<span class="number">0</span>].node;</span><br><span class="line">         <span class="keyword">this</span>.ctx = <span class="keyword">this</span>.canvas.getContext(<span class="string">'2d'</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><blockquote><blockquote><p>由于不同手机的分辨率和宽度像素不确定，还有手机的像素密度值。我们还需要调整七巧板点位置的相对比例（这个下边会有相关代码）：</p></blockquote></blockquote><p>此处我们按照整个屏幕来调整，首先先获取手机相关信息，除此之外手机还有一个像素密度值pixelRatio：<br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">uni.getSystemInfo(&#123;</span><br><span class="line">      success: <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.systemInfo = res;</span><br><span class="line">        <span class="built_in">console</span>.log(res);</span><br><span class="line">      &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p></p><p>获取系统信息：<br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">errMsg: <span class="string">"getSystemInfo:ok"</span></span><br><span class="line">language: <span class="string">"zh-CN"</span></span><br><span class="line">model: <span class="string">"iPhone"</span></span><br><span class="line">pixelRatio: <span class="number">2</span></span><br><span class="line">platform: <span class="string">"ios"</span></span><br><span class="line">screenHeight: <span class="number">667</span></span><br><span class="line">screenWidth: <span class="number">375</span></span><br><span class="line">statusBarHeight: <span class="number">0</span></span><br><span class="line">system: <span class="string">"iOS 13.2.3"</span></span><br><span class="line">windowBottom: <span class="number">0</span></span><br><span class="line">windowHeight: <span class="number">623</span></span><br><span class="line">windowTop: <span class="number">44</span></span><br><span class="line">windowWidth: <span class="number">375</span></span><br></pre></td></tr></table></figure><p></p><h3 id="根据系统和屏幕信息给canvas设置width和height："><a href="#根据系统和屏幕信息给canvas设置width和height：" class="headerlink" title="根据系统和屏幕信息给canvas设置width和height："></a>根据系统和屏幕信息给canvas设置width和height：</h3><p>给canvas设置width和height：</p><h4 id="h5设置为："><a href="#h5设置为：" class="headerlink" title="h5设置为："></a>h5设置为：</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> dpr = uni.getSystemInfoSync().pixelRatio;</span><br><span class="line"><span class="keyword">this</span>.canvas.width = <span class="keyword">this</span>.systemInfo.windowWidth * dpr;</span><br><span class="line"><span class="keyword">this</span>.canvas.height = <span class="keyword">this</span>.systemInfo.windowWidth * dpr;</span><br></pre></td></tr></table></figure><h4 id="小程序设置为："><a href="#小程序设置为：" class="headerlink" title="小程序设置为："></a>小程序设置为：</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> dpr = uni.getSystemInfoSync().pixelRatio;</span><br><span class="line"><span class="keyword">this</span>.canvas.width = res[<span class="number">0</span>].width * dpr;</span><br><span class="line"><span class="keyword">this</span>.canvas.height = res[<span class="number">0</span>].width * dpr;</span><br></pre></td></tr></table></figure><p>由于手机端有pixelRatio像素密度，真实的手机端需要canvas缩放，负责显示为半个canvas，所以在小程序端需要添加（h5端添加显示错乱）：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.ctx.scale(dpr, dpr);</span><br></pre></td></tr></table></figure><h3 id="用canvas画七巧板："><a href="#用canvas画七巧板：" class="headerlink" title="用canvas画七巧板："></a>用canvas画七巧板：</h3><p>七巧板点位置的数字：</p><p>【0，200，400，600，800】</p><p>如果不调整，不是全屏展示整个七巧板，可以按照最小手机的分辨率相对按比例缩小；如果要全屏展示七巧板，我们需要获取屏幕的宽度，然后按照比例进行缩放上述点位置；</p><p>获取到canvas，然后接下来就是画七巧板。我们吧这个方法提出来直接写个方法，获取到canvas，执行this.draw();</p><p>画之前，先按照比例缩放七巧板点位置的比例：<br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.tangram.map(<span class="function"><span class="params">plece</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> plece.p.map(<span class="function"><span class="params">coordinate</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">if</span> (coordinate.x === <span class="number">200</span>) &#123;</span><br><span class="line">              coordinate.x = <span class="keyword">this</span>.systemInfo.windowWidth / <span class="number">4</span>;</span><br><span class="line">          &#125; <span class="keyword">else</span> <span class="keyword">if</span> (coordinate.x === <span class="number">400</span>) &#123;</span><br><span class="line">              coordinate.x = <span class="keyword">this</span>.systemInfo.windowWidth / <span class="number">2</span>;</span><br><span class="line">          &#125; <span class="keyword">else</span> <span class="keyword">if</span> (coordinate.x === <span class="number">600</span>) &#123;</span><br><span class="line">              coordinate.x = (<span class="keyword">this</span>.systemInfo.windowWidth / <span class="number">4</span>) * <span class="number">3</span>;</span><br><span class="line">          &#125; <span class="keyword">else</span> <span class="keyword">if</span> (coordinate.x === <span class="number">800</span>) &#123;</span><br><span class="line">              coordinate.x = <span class="keyword">this</span>.systemInfo.windowWidth;</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">if</span> (coordinate.y === <span class="number">200</span>) &#123;</span><br><span class="line">              coordinate.y = <span class="keyword">this</span>.systemInfo.windowWidth / <span class="number">4</span>;</span><br><span class="line">          &#125; <span class="keyword">else</span> <span class="keyword">if</span> (coordinate.y === <span class="number">400</span>) &#123;</span><br><span class="line">              coordinate.y = <span class="keyword">this</span>.systemInfo.windowWidth / <span class="number">2</span>;</span><br><span class="line">          &#125; <span class="keyword">else</span> <span class="keyword">if</span> (coordinate.y === <span class="number">600</span>) &#123;</span><br><span class="line">              coordinate.y = (<span class="keyword">this</span>.systemInfo.windowWidth / <span class="number">4</span>) * <span class="number">3</span>;</span><br><span class="line">          &#125; <span class="keyword">else</span> <span class="keyword">if</span> (coordinate.y === <span class="number">800</span>) &#123;</span><br><span class="line">              coordinate.y = <span class="keyword">this</span>.systemInfo.windowWidth;</span><br><span class="line">          &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="keyword">this</span>.tangram.length; i++) &#123;</span><br><span class="line">    <span class="keyword">this</span>.draw(<span class="keyword">this</span>.tangram[i], ctx);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>draw()方法：<br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">draw(plece, cxt) &#123;</span><br><span class="line">      cxt.beginPath();</span><br><span class="line">      cxt.moveTo(plece.p[<span class="number">0</span>].x, plece.p[<span class="number">0</span>].y);</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">1</span>; i &lt; plece.p.length; i++) &#123;</span><br><span class="line">        cxt.lineTo(plece.p[i].x, plece.p[i].y);</span><br><span class="line">      &#125;</span><br><span class="line">      cxt.closePath();</span><br><span class="line">      cxt.fillStyle = plece.color;</span><br><span class="line">      cxt.fill();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>画七巧板</p><p>代码中使用this，需要data里边定义变量：<br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">systemInfo: &#123;&#125;,</span><br><span class="line">canvas: <span class="literal">null</span>,</span><br><span class="line">ctx: <span class="literal">null</span>,</span><br><span class="line">tangram: []</span><br></pre></td></tr></table></figure><p></p><p>完结，如果想体验直接扫码访问小程序，进入首页，点击体验或者授权都可以，</p><p>菜单canvas下，点击Tangram.js，就可以浏览七巧板效果；</p><h3 id="体验地址"><a href="#体验地址" class="headerlink" title="体验地址"></a>体验地址</h3><h4 id="小程序码："><a href="#小程序码：" class="headerlink" title="小程序码："></a>小程序码：</h4><p><img src="/img/wechatcode.png" alt="image"></p><h4 id="h5访问地址："><a href="#h5访问地址：" class="headerlink" title="h5访问地址："></a>h5访问地址：</h4><p><a href="https://algate.github.io/HammerUI/">h5展示-浏览器打开手机浏览模式F12</a></p><h4 id="公众号访问："><a href="#公众号访问：" class="headerlink" title="公众号访问："></a>公众号访问：</h4><p><img src="/img/wx-onion.png" alt="image"></p></div><div class="reward" ontouchstart><div class="reward-wrap">赏<div class="reward-box"><span class="reward-type"><img class="alipay" src="/img/alipayimg.png"><b>支付宝打赏</b> </span><span class="reward-type"><img class="wechat" src="/img/weipayimg.png"><b>微信打赏</b></span></div></div><p class="reward-tip">赞赏是不耍流氓的鼓励</p></div><div class="post-footer"><div>转载声明：商业转载请联系作者获得授权,非商业转载请注明出处 © <a href target="_blank">Onions</a></div><div></div></div></article><div class="article-nav prev-next-wrap clearfix"><a href="/archives/54500.html" class="next-post btn btn-default" title="承认别人的牛逼才是真正的牛逼"><span class="hidden-lg">下一篇</span> <span class="hidden-xs">承认别人的牛逼才是真正的牛逼</span><i class="fa fa-angle-right fa-fw"></i></a></div><div id="comments"><div id="vcomments" class="valine"></div><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="/assets/valine.min.js"></script><script>new Valine({av:AV,el:"#vcomments",appId:"XCBkrMT2cT5gHnAV3uKwy2Eo-gzGzoHsz",appKey:"bX6iJOMctdSEGOXysJloaoGN",placeholder:"不要和我谈理想，我的理想是不上班！",notify:!1,verify:!1,avatar:"onions",meta:"nick,mail".split(","),pageSize:"10",path:window.location.pathname,lang:"zh-CN".toLowerCase()})</script></div></main><aside id="article-toc" role="navigation" class="col-md-4"><div class="widget"><h3 class="title">文章目录</h3><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#准备事项"><span class="toc-text">准备事项</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#画七巧板的点位值："><span class="toc-text">画七巧板的点位值：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#画七巧板"><span class="toc-text">画七巧板</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#html添加canvas元素："><span class="toc-text">html添加canvas元素：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-上述vue的html代码编译为h5："><span class="toc-text">1.上述vue的html代码编译为h5：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-编译为小程序为："><span class="toc-text">2.编译为小程序为：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#获取canvas元素："><span class="toc-text">获取canvas元素：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#H5获取canvas元素："><span class="toc-text">H5获取canvas元素：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#小程序获取canvas元素："><span class="toc-text">小程序获取canvas元素：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#根据系统和屏幕信息给canvas设置width和height："><span class="toc-text">根据系统和屏幕信息给canvas设置width和height：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#h5设置为："><span class="toc-text">h5设置为：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#小程序设置为："><span class="toc-text">小程序设置为：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#用canvas画七巧板："><span class="toc-text">用canvas画七巧板：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#体验地址"><span class="toc-text">体验地址</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#小程序码："><span class="toc-text">小程序码：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#h5访问地址："><span class="toc-text">h5访问地址：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#公众号访问："><span class="toc-text">公众号访问：</span></a></li></ol></li></ol></div></aside></div></div></section><footer class="main-footer"><div class="container"><div class="row"></div></div></footer><a id="back-to-top" class="icon-btn hide"><i class="fa fa-chevron-up"></i></a><div class="copyright"><div class="container"><div class="row"><div class="col-sm-12"><div class="busuanzi">访问量: <strong id="busuanzi_value_site_pv"><i class="fa fa-spinner fa-spin"></i> </strong>&nbsp; | &nbsp; 访客数: <strong id="busuanzi_value_site_uv"><i class="fa fa-spinner fa-spin"></i></strong></div></div><div class="col-sm-12"><span>版权所有 onions洋葱信息技术Copyright &copy; 2016-2020 </span>| <span>Powered by <a href="//hexo.io" class="copyright-links" target="_blank" rel="nofollow">Hexo</a> </span>| <span>Theme by <a href="//github.com/shenliyang/hexo-theme-snippet.git" class="copyright-links" target="_blank" rel="nofollow">Snippet</a></span></div></div></div></div><script src="/assets/tagcanvas.min.js?rev=2.9"></script><script>var tagOption={textColour:"#444",outlineMethod:"block",outlineColour:"#FFDAB9",interval:30,textHeight:13,outlineRadius:3,freezeActive:!0,frontSelect:!0,initial:[.1,-.1],depth:.5,decel:.95,maxSpeed:.03,reverse:!0,fadeIn:500,wheelZoom:!0};TagCanvas.Start("tag-cloud-3d","",tagOption)</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="/assets/vector.js?rev=@@hash"></script><script src="/assets/reject.js?rev=@@hash"></script><script src="/js/app.js?rev=@@hash"></script></body><!-- rebuild by neat -->